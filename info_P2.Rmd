---
author: "Mauricio Rodriguez, Renato Rodriguez, Sebastian Quispe, Christian Salazar, Frings Barrueta" 
title: "Impacto del proceso de vacunación contra la Covid-19"
date: "May 11th 2021"
output:
  html_notebook:
    toc: yes
    toc_float:
      collapsed: no
      smooth_scroll: no
    number_sections: yes
    theme: journal
  html_document:
    toc: yes
    df_print: paged
---

# Cargar librerias 
```{r}
library(readr)
library(dplyr)
library (ggplot2)
library(stringr)
library(scales)
library(lubridate)
library(modeest)
library(viridis)
``` 

# Asignar DF's con los datos RAW de los archivos
```{r}
DFFallecidosRAW <- read_csv("fallecidos.csv")
DFVacunadosRAW <- read_csv("vacunados.csv")
```

# Limpieza general de DATA FRAMES
## Data frame fallecidos
Generamos un nuevo data frame donde "eliminamos" las variables que indicaban UUID,Provincia,distrito y ubicación geográfica. También, renombramos la variable "EDAD_DECLARADA" a "EDAD" para simplificar y cambiamos el formato de la variable FECHA_FALLECIMIENTO a fin de que calze con el estándar de R.
```{r}
DFFallecidosCLEAN<-subset(DFFallecidosRAW,select = -c(FECHA_CORTE,UUID,FECHA_NAC,UBIGEO,PROVINCIA,DISTRITO))

DFFallecidosCLEAN %>% rename("EDAD"= "EDAD_DECLARADA")-> DFFallecidosCLEAN

vector<-DFFallecidosCLEAN$FECHA_FALLECIMIENTO
dia<-str_sub(vector,-2,-1) #dia
mes<-str_sub(vector,-4,-3) #mes
anio<-str_sub(vector, end = 4) #anio
date = paste(anio,"-",mes,"-",dia, sep = "")
DFFallecidosCLEAN$FECHA_FALLECIMIENTO<- lubridate::ymd(date)
```


## Data frame vacunados
Generamos un nuevo data frame donde "eliminamos" las variables que indicaban fecha de corte, UUID, diresa, provincia y distrito
Asimismo, renombramos la variable "GRUPO_Riesgo a "GRUPO" para simplificar. No se eliminaron las observaciones incompletas puesto que se utilizaran para todos los análisis que no requieran el uso de su variable EDAD.
```{r}
DFVacunadosCLEAN<-subset(DFVacunadosRAW,select = -c(FECHA_CORTE,UUID,DIRESA,PROVINCIA,DISTRITO))
DFVacunadosCLEAN %>% rename("GRUPO"="GRUPO_RIESGO")-> DFVacunadosCLEAN

vector<-DFVacunadosCLEAN$FECHA_VACUNACION
dia<-str_sub(vector,-2,-1) #dia
mes<-str_sub(vector,-4,-3) #mes
anio<-str_sub(vector, end = 4) #anio
date = paste(anio,"-",mes,"-",dia, sep = "")
DFVacunadosCLEAN$FECHA_VACUNACION<- lubridate::ymd(date)
```

En ambos data frames las variables fueron descartadas en base a que no eran requeridas para nuestro análisis por no tener información relevante.

# Figuras de Mérito

## Dataset FALLECIDOS

### FECHA_FALLECIMIENTO
```{r}

```

### EDAD
```{r, echo=FALSE}
ggplot(data = DFFallecidosCLEAN, aes(x=EDAD)) + 
  geom_histogram(aes(fill=..count..)) + 
  scale_fill_viridis("Frecuencia", discrete=F) + 
  labs(title="Edades de personas fallecidas por COVID-19",
       x="Edad(anhos)",
       y="Frecuencia")
```

### SEXO
```{r, echo=FALSE}
# tablaSexoFallecidos <- data.frame(rbind(table(DFFallecidosCLEAN$SEXO)))
barplot(table(DFFallecidosCLEAN$SEXO),
        main="Sexo de personas fallecidas por COVID-19",
        col=c("orange", "blue"),
        legend.text=c("Mujeres","Hombres"),
        ylim = c(0,70000),
        ylab = "Frecuencia"
        )
```

## DEPARTAMENTO
```{r, echo=FALSE}

```



